# Svitlo Kremen Telegram Bot

Telegram –±–æ—Ç –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≥—Ä–∞—Ñ—ñ–∫–∞ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó –≤ –ü–æ–ª—Ç–∞–≤—Å—å–∫—ñ–π –æ–±–ª–∞—Å—Ç—ñ (–£–∫—Ä–∞—ó–Ω–∞).

## –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

‚úÖ **–ü–æ—à—É–∫ —á–µ—Ä–≥–∏ –∑–∞ –∞–¥—Ä–µ—Å–æ—é** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –º—ñ—Å—Ç–æ, –≤—É–ª–∏—Ü—é —Ç–∞ –Ω–æ–º–µ—Ä –±—É–¥–∏–Ω–∫—É
‚úÖ **–†–æ–∑—É–º–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥** - —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–≤–µ–¥–µ–Ω–Ω—è –∞–¥—Ä–µ—Å–∏
‚úÖ **–ó—Ä—É—á–Ω–∏–π UI** - –∫–Ω–æ–ø–∫–∏ –¥–ª—è —à–≤–∏–¥–∫–æ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
‚úÖ **–ë–∞–≥–∞—Ç–æ –º—ñ—Å—Ç** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö –º—ñ—Å—Ç –ü–æ–ª—Ç–∞–≤—Å—å–∫–æ—ó –æ–±–ª–∞—Å—Ç—ñ
‚úÖ **–®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫** - –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑ 3551+ –∞–¥—Ä–µ—Å

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–∞—Ä—Å–µ—Ä

–°–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –±–∞–∑—É –∞–¥—Ä–µ—Å:

```bash
cd ../parser
source ../venv/bin/activate
python3 parse_pdf_v2.py
```

–¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å —Ñ–∞–π–ª `addresses.json` –∑ –∞–¥—Ä–µ—Å–∞–º–∏.

### 2. –°—Ç–≤–æ—Ä—ñ—Ç—å Telegram –±–æ—Ç–∞

1. –ó–Ω–∞–π–¥—ñ—Ç—å [@BotFather](https://t.me/botfather) –≤ Telegram
2. –í—ñ–¥–ø—Ä–∞–≤—Ç–µ `/newbot`
3. –í–≤–µ–¥—ñ—Ç—å —ñ–º'—è —Ç–∞ username –±–æ—Ç–∞
4. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–æ–∫–µ–Ω

–î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó: [BOT_SETUP.md](BOT_SETUP.md)

### 3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é

```bash
cd bot/src/main/resources
cp config.properties config.properties
nano config.properties
```

–î–æ–¥–∞–π—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω:
```properties
bot.token=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
addresses.file.path=../parser/addresses.json
```

### 4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞

```bash
cd bot
./gradlew run
```

–ì–æ—Ç–æ–≤–æ! –ó–Ω–∞–π–¥—ñ—Ç—å –≤–∞—à–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤—Ç–µ `/start`

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞:

- `/start` - –ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É
- `/help` - –î–æ–≤—ñ–¥–∫–∞
- `/cities` - –°–ø–∏—Å–æ–∫ –º—ñ—Å—Ç
- `/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/cancel` - –°–∫–∞—Å—É–≤–∞—Ç–∏

### –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–≤–µ–¥–µ–Ω–Ω—è –∞–¥—Ä–µ—Å–∏:

```
–º.–ü–æ–ª—Ç–∞–≤–∞, –≤—É–ª. –ì—Ä–∞–±—á–∞–∫–∞, 10
–ü–æ–ª—Ç–∞–≤–∞ –≤—É–ª. –ì—Ä–∞–±—á–∞–∫–∞ 10
–ü–æ–ª—Ç–∞–≤–∞ –ì—Ä–∞–±—á–∞–∫–∞ 10
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —Ñ–æ—Ä–º–∞—Ç —Ç–∞ –∑–Ω–∞–π–¥–µ –∞–¥—Ä–µ—Å—É.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
bot/
‚îú‚îÄ‚îÄ src/main/kotlin/com/svitlobot/
‚îÇ   ‚îú‚îÄ‚îÄ Main.kt              # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Address.kt       # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ       ‚îî‚îÄ‚îÄ AddressService.kt # –õ–æ–≥—ñ–∫–∞ –ø–æ—à—É–∫—É –∞–¥—Ä–µ—Å
‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îú‚îÄ‚îÄ config.properties    # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–Ω–µ –≤ Git!)
‚îÇ   ‚îú‚îÄ‚îÄ config.properties.example
‚îÇ   ‚îî‚îÄ‚îÄ logback.xml          # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ build.gradle.kts         # Gradle –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ settings.gradle.kts
‚îî‚îÄ‚îÄ README.md
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Kotlin** 1.9.21
- **Telegram Bot API** - [kotlin-telegram-bot](https://github.com/kotlin-telegram-bot/kotlin-telegram-bot)
- **Gson** - –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JSON
- **Gradle** - —Å–∏—Å—Ç–µ–º–∞ –∑–±—ñ—Ä–∫–∏
- **Logback** - –ª–æ–≥—É–≤–∞–Ω–Ω—è

## –†–æ–∑—Ä–æ–±–∫–∞

### –í–∏–º–æ–≥–∏:

- Java 17+
- Gradle 7.6+ (–≤–∫–ª—é—á–µ–Ω–æ wrapper)
- Kotlin 1.9+

### –ó–±—ñ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç—É:

```bash
./gradlew build
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:

```bash
./gradlew test
```

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è JAR —Ñ–∞–π–ª—É:

```bash
./gradlew jar
```

JAR –±—É–¥–µ –≤ `build/libs/svitlo-kremen-bot-1.0.0.jar`

## Deployment

–î–æ–∫–ª–∞–¥–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø–æ –¥–µ–ø–ª–æ—é –¥–∏–≤—ñ—Ç—å—Å—è –≤ [BOT_SETUP.md](BOT_SETUP.md)

### –®–≤–∏–¥–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ VPS:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ
git clone <–≤–∞—à_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π>
cd svitlo_kremen_tg_bot/bot

export BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω"
./gradlew build
nohup java -jar build/libs/svitlo-kremen-bot-1.0.0.jar &
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker:

```bash
docker build -t svitlo-bot .
docker run -e BOT_TOKEN="your_token" svitlo-bot
```

## –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

–ë–æ—Ç –ª–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é—î—Ç—å—Å—è. –ü—Ä–∏–∫–ª–∞–¥–∏ –º–æ–∂–ª–∏–≤–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å:

- üìä –ì—Ä–∞—Ñ—ñ–∫ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å
- üîî –ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—Ä–æ –∑–º—ñ–Ω–∏ –≥—Ä–∞—Ñ—ñ–∫—É
- üó∫ –ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∞–¥—Ä–µ—Å–∏
- üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞–π–æ–Ω–∞—Ö –º—ñ—Å—Ç–∞
- üåê –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω—ñ—Å—Ç—å

## –õ–æ–≥–∏ —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

–õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `logs/bot.log`

–ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ:
```bash
tail -f logs/bot.log
```

## –ë–µ–∑–ø–µ–∫–∞

‚ö†Ô∏è **–í–ê–ñ–õ–ò–í–û:**
- –ù—ñ–∫–æ–ª–∏ –Ω–µ –ø—É–±–ª—ñ–∫—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ Git
- `config.properties` –¥–æ–¥–∞–Ω–æ –≤ `.gitignore`
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–Ω–æ–≤–ª—é–π—Ç–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

## Troubleshooting

### –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É:

```
–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ: addresses.json
```
**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–∞—Ä—Å–µ—Ä (–¥–∏–≤. –∫—Ä–æ–∫ 1)

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –ø—Ä–æ—Ü–µ—Å –∑–∞–ø—É—â–µ–Ω–∏–π
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏: `tail -f logs/bot.log`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ç–æ–∫–µ–Ω –≤ `config.properties`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–∑'—î–¥–Ω–∞–Ω–Ω—è

## –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤—ñ–ª—å–Ω–æ

## –ê–≤—Ç–æ—Ä–∏

–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –¥–æ–ø–æ–º–æ–≥–∏ –ª—é–¥—è–º –ü–æ–ª—Ç–∞–≤—Å—å–∫–æ—ó –æ–±–ª–∞—Å—Ç—ñ

## –ü–æ–¥—è–∫–∏

- [kotlin-telegram-bot](https://github.com/kotlin-telegram-bot/kotlin-telegram-bot) - –∑–∞ —á—É–¥–æ–≤—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É
- –ü–æ–ª—Ç–∞–≤–æ–±–ª–µ–Ω–µ—Ä–≥–æ - –∑–∞ –Ω–∞–¥–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å
